<% if user_signed_in? %>
  <h1> Hello <%= current_user.email %> </h1>
  <p>Welcome to my page!</p>
  <%= link_to 'Sign out', destroy_user_session_path, data: { 'turbo-method': :delete } %>
<%# else %>
  <%#= link_to 'Sign in', new_user_session_path %>
<% end %>

<h1>Post List</h1>

<table class="table table-hover table-bordered">
  <thead class="table-dark">
  <tr>
    <th>Title</th>
    <th>Email</th>
    <th>Content</th>
    <th>Category</th>
    <th>Comments count</th>
    <th>Image</th>
    <th>Address</th>
    <th>Action</th>

  </tr>
  </thead>
  <tbody>
  <% @posts.each_with_index do |post, index| %>
    <tr>
      <td>
        <% if index < 3 && params[:page] == nil %>
          <span class="badge bg-warning text-dark">HOT</span>
        <% end %>
        <%= post.title %>
      </td>
      <td><%= post.user.email %></td>
      <td><%= post.content %></td>
      <td><%= post.categories.pluck(:name).join(',') %></td>
      <td><%= post.comments_count %></td>
      <td><%= image_tag post.image.url if post.image.present? %></td>
      <td><%= post.address %></td>

      <% if post.user != current_user %>

        <td class="btn-group-vertical">
          <%= link_to 'Show', post_path(post), class: "btn btn-outline-primary" %>
          <%= link_to 'New Comment', new_post_comment_path(post), class: "btn btn-outline-secondary" %>
        </td>
      <% else %>
        <td>
          <%= link_to 'Show', post_path(post), class: "btn btn-outline-primary" %>
          <%= link_to 'Edit', edit_post_path(post.id), class: "btn btn-outline-success" %>
          <%= link_to 'New Comment', new_post_comment_path(post), class: "btn btn-outline-secondary" %>
          <%#= link_to 'Comments', post_path(post) %>
          <%= button_to 'Delete', post_path(post.id), method: :delete, class: 'btn btn-danger' %>
        </td>
        </tr>
      <% end %>
      </tbody>
  <% end %>
  </table>
<div class="pagination justify-content-end">
  <%= paginate @posts %>
</div>




